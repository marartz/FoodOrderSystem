<block-ui delayStart="500">
    <div id="app">

        <div id="notice" class="warning" *ngIf="(initializationError$ | async) !== undefined"><p>Ein technischer Fehler ist aufgetreten. Bitte versuchen Sie es erneut bzw. kontaktieren Sie uns, wenn das Problem anhält.</p></div>
        <div id="notice" class="warning" *ngIf="(updateError$ | async) !== undefined"><p>{{(updateError$ | async)}}</p></div>

        <div id="backend" *ngIf="isInitialized$ | async">

            <section id="hero">
                <div class="wrapper">
                    <div class="inner">
                        <div class="inner-wrapper">
                            <div id="title">
                                <div class="col">
                                    <span>Verwaltung</span>
                                    <h1>{{(restaurant$ | async).name}}</h1>
                                </div>
                            </div>
                            <div id="links">
                                <div class="col">
                                    <ul class="nav-tabs">
                                        <li class="tab"><a [class.active]="(selectedTab$ | async) === 'general'" (click)="selectTab('general')">Allgemein</a></li>
                                        <li class="tab"><a [class.active]="(selectedTab$ | async) === 'image'" (click)="selectTab('image')">Grafiken</a></li>
                                        <li class="tab"><a [class.active]="(selectedTab$ | async) === 'order'" (click)="selectTab('order')">Bestellung</a></li>
                                        <li class="tab"><a [class.active]="(selectedTab$ | async) === 'cuisines'" (click)="selectTab('cuisines')">Kategorien</a></li>
                                        <li class="tab"><a [class.active]="(selectedTab$ | async) === 'payment'" (click)="selectTab('payment')">Bezahlung</a></li>
                                        <li class="tab"><a [class.active]="(selectedTab$ | async) === 'opening-hours'" (click)="selectTab('opening-hours')">Öffnungszeiten</a></li>
                                        <li class="tab"><a [class.active]="(selectedTab$ | async) === 'dishes'" (click)="selectTab('dishes')">Speisen</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="content">
                <div class="wrapper">
                    <div class="inner">
                        <div class="inner-wrapper">
                            <div>
                                <app-general-settings *ngIf="(selectedTab$ | async) === 'general'"></app-general-settings>
                                <app-image-settings *ngIf="(selectedTab$ | async) === 'image'"></app-image-settings>
                                <app-order-settings *ngIf="(selectedTab$ | async) === 'order'"></app-order-settings>
                                <app-cuisine-settings *ngIf="(selectedTab$ | async) === 'cuisines'"></app-cuisine-settings>
                                <app-payment-settings *ngIf="(selectedTab$ | async) === 'payment'"></app-payment-settings>
                                <app-opening-hours-settings *ngIf="(selectedTab$ | async) === 'opening-hours'"></app-opening-hours-settings>
                                <app-dish-management *ngIf="(selectedTab$ | async) === 'dishes'"></app-dish-management>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

<!--                                <div class="form-header">-->
<!--                                    <div class="col"><h5>Restaurantkategorien</h5></div>-->
<!--                                </div>-->
<!--                                <form [formGroup]="addCuisineForm" (ngSubmit)="onAddCuisine(addCuisineForm.value)">-->
<!--                                    <div class="row">-->
<!--                                        <div class="col-lg-6">-->
<!--                                            <div class="form-input">-->
<!--                                                <label class="form-label">Cuisines</label>-->
<!--                                                <div class="input-group">-->
<!--                                                    <select id="cuisineId" formControlName="cuisineId">-->
<!--                                                        <option disabled selected active>Bitte auswählen</option>-->
<!--                                                        <option *ngFor="let cuisine of availableCuisines" value="{{cuisine.id}}">{{cuisine.name}}</option>-->
<!--                                                    </select>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="col-lg-6">-->
<!--                                            <div class="backend-input">-->
<!--                                                <div class="cuisine" tabindex="-1">-->
<!--                                                    <div class="wrap" *ngFor="let cuisine of restaurant.cuisines">-->
<!--                                                        <h6>{{cuisine.name}} <button class="edit-link text-link-small" (click)="onRemoveCuisine(cuisine.id)">Entfernen</button></h6>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <button type="submit" class="form-submit" *ngIf="addCuisineForm.dirty">Hinzufügen</button>-->
<!--                                </form>-->
<!--                                &lt;!&ndash; ENDE: Kontaktinformationen &ndash;&gt;-->

<!--                                <hr class="divider">-->

<!--                                &lt;!&ndash; START: Bezahlungsmöglichkeiten &ndash;&gt;-->
<!--                                <div class="form-header">-->
<!--                                    <div class="col"><h5>Bezahlungsmöglichkeiten</h5></div>-->
<!--                                </div>-->
<!--                                <div class="row">-->
<!--                                    <div class="col-md-6">-->
<!--                                        <div class="payment-card" *ngFor="let paymentMethod of paymentMethods" (click)="onPaymentMethodStatusToggled(paymentMethod)">-->
<!--                                            <div class="payment-body">-->
<!--                                                <div class="payment-container">-->
<!--                                                    <div class="payment-wrapper">-->
<!--                                                        <div class="payment-content">-->
<!--                                                            <div class="top">-->
<!--                                                                <div class="col">-->
<!--                                                                    <img src="../../assets/images/icons/brands/{{paymentMethod.imageName}}.svg" alt="" style="height: 26px;">-->
<!--                                                                </div>-->
<!--                                                                <div class="col-auto">-->
<!--                                                                    <span class="badge active" *ngIf="isPaymentMethodEnabled(paymentMethod)">Aktiv</span>-->
<!--                                                                    <span class="badge inactive" *ngIf="!isPaymentMethodEnabled(paymentMethod)">Inaktiv</span>-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                            <div class="bottom">-->
<!--                                                                <div class="name">{{paymentMethod.name}}</div>-->
<!--                                                                <span class="description">{{paymentMethod.description}}</span>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                &lt;!&ndash; ENDE: Bezahlungsmöglichkeiten &ndash;&gt;-->

<!--                                <hr class="divider">-->

<!--                                &lt;!&ndash; START: Restaurantverwalter &ndash;&gt;-->
<!--                                <div class="form-header">-->
<!--                                    <div class="col"><h5>Restaurantverwalter</h5></div>-->
<!--                                    <div class="col-auto"></div>-->
<!--                                </div>-->
<!--                                <div id="table">-->
<!--                                    <table>-->
<!--                                        <thead>-->
<!--                                            <tr>-->
<!--                                                <th scope="col" style="min-width: 240px;">Name</th>-->
<!--                                                <th scope="col"></th>-->
<!--                                            </tr>-->
<!--                                        </thead>-->
<!--                                        <tbody>-->
<!--                                            <tr *ngFor="let user of restaurant.administrators">-->
<!--                                                <th scope="row">-->
<!--                                                    <p class="email">{{user.email}}</p>-->
<!--                                                </th>-->
<!--                                                <td class="actions">-->
<!--                                                    <a (click)="removeUser(user)" class="action-item red" placement="top" ngbTooltip="Löschen"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></a>-->
<!--                                                </td>-->
<!--                                            </tr>-->
<!--                                        </tbody>-->
<!--                                    </table>-->
<!--                                </div>-->

<!--                                &lt;!&ndash; /// &ndash;&gt;-->
<!--                                <div>-->
<!--                                    <div class="backend-input">-->
<!--                                        <table>-->
<!--                                            <tbody>-->
<!--                                                <tr>-->
<!--                                                    <td><input id="user" type="text" class="form-control" [(ngModel)]="userToBeAdded" [ngbTypeahead]="searchForUser" [inputFormatter]="formatUser" [resultFormatter]="formatUser" [editable]='false' /></td>-->
<!--                                                    <td><button class="text-link-small add-administrator" (click)="addSelectedUser()">+ Hinzufügen</button></td>-->
<!--                                                </tr>-->
<!--                                            </tbody>-->
<!--                                        </table>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                &lt;!&ndash; /// &ndash;&gt;-->

<!--                                &lt;!&ndash; ENDE: Restaurantverwalter &ndash;&gt;-->

<!--                                <hr class="divider">-->

<!--                                &lt;!&ndash; START: Lieferzeiten &ndash;&gt;-->
<!--                                <div class="form-header">-->
<!--                                    <div class="col"><h5>Lieferzeiten</h5></div>-->
<!--                                </div>-->
<!--                                <form [formGroup]="addOpeningPeriodForm" (ngSubmit)="onAddOpeningPeriod(addOpeningPeriodForm.value)">-->
<!--                                    <div id="table">-->
<!--                                        <table>-->
<!--                                            <thead>-->
<!--                                                <tr>-->
<!--                                                    <th scope="col" style="min-width: 240px;">Tag</th>-->
<!--                                                    <th scope="col">Beginn</th>-->
<!--                                                    <th scope="col">Ende</th>-->
<!--                                                    <th scope="col"></th>-->
<!--                                                </tr>-->
<!--                                            </thead>-->
<!--                                            <tbody>-->
<!--                                                <tr *ngFor="let openingPeriod of openingPeriodVMs">-->
<!--                                                    <th scope="row">-->
<!--                                                        <p class="email">{{openingPeriod.dayOfWeekText}}</p>-->
<!--                                                    </th>-->
<!--                                                    <th scope="row">-->
<!--                                                        <p class="email">{{openingPeriod.startTimeText}}</p>-->
<!--                                                    </th>-->
<!--                                                    <th scope="row">-->
<!--                                                        <p class="email">{{openingPeriod.endTimeText}}</p>-->
<!--                                                    </th>-->
<!--                                                    <td class="actions">-->
<!--                                                        <a (click)="onRemoveOpeningPeriod(openingPeriod)" class="action-item red" placement="top" ngbTooltip="Löschen"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></a>-->
<!--                                                    </td>-->
<!--                                                </tr>-->
<!--                                            </tbody>-->
<!--                                        </table>-->
<!--                                    </div>-->
<!--                                    <div id="table">-->
<!--                                        <table>-->
<!--                                            <thead>-->
<!--                                                <tr>-->
<!--                                                    <th scope="col"></th>-->
<!--                                                    <th scope="col"></th>-->
<!--                                                    <th scope="col"></th>-->
<!--                                                    <th scope="col"></th>-->
<!--                                                </tr>-->
<!--                                            </thead>-->
<!--                                            <tbody>-->
<!--                                                <tr>-->
<!--                                                    <th scope="row">-->
<!--                                                        <div class="form-input">-->
<!--                                                            <div class="input-group">-->
<!--                                                                <select class="form-control" id="dayOfWeek" formControlName="dayOfWeek">-->
<!--                                                                    <option value="" selected disabled hidden>&#45;&#45; Bitte auswählen &#45;&#45;</option>-->
<!--                                                                    <option value="0">Montag</option>-->
<!--                                                                    <option value="1">Dienstag</option>-->
<!--                                                                    <option value="2">Mittwoch</option>-->
<!--                                                                    <option value="3">Donnerstag</option>-->
<!--                                                                    <option value="4">Freitag</option>-->
<!--                                                                    <option value="5">Samstag</option>-->
<!--                                                                    <option value="6">Sonntag</option>-->
<!--                                                                </select>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                    </th>-->
<!--                                                    <th scope="row">-->
<!--                                                        <div class="form-input">-->
<!--                                                            <div class="input-group">-->
<!--                                                                <input type="time" mozactionhint="next" autocapitalize="none" autocomplete="off" inputmode="numeric" class="form-control" formControlName="start">-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                    </th>-->
<!--                                                    <th scope="row">-->
<!--                                                        <div class="form-input">-->
<!--                                                            <div class="input-group">-->
<!--                                                                <input type="time" mozactionhint="next" autocapitalize="none" autocomplete="off" inputmode="numeric" class="form-control" formControlName="end">-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                    </th>-->
<!--                                                    <td class="actions">-->
<!--                                                        <div class="form-input">-->
<!--                                                            <div class="input-group">-->
<!--                                                                <button role="button" class="action-item green" placement="top" ngbTooltip="Hinzufügen"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                    </td>-->
<!--                                                </tr>-->
<!--                                            </tbody>-->
<!--                                        </table>-->
<!--                                    </div>-->
<!--                                </form>-->
<!--                                &lt;!&ndash; ENDE: Lieferzeiten &ndash;&gt;-->

<!--                                <hr class="divider">-->

<!--                                &lt;!&ndash; START: Speisekarte &ndash;&gt;-->
<!--                                <div class="form-header">-->
<!--                                    <div class="col"><h5>Speisekarte</h5></div>-->
<!--                                </div>-->
<!--                                <form>-->
<!--                                    <div class="backend-input">-->
<!--                                        <ul ngbNav #nav="ngbNav" class="nav-tabs" [(activeId)]="activeDishCategoryId">-->
<!--                                            <li [ngbNavItem]="dishCategory.id" *ngFor="let dishCategory of dishCategories">-->
<!--                                                <a id="form" ngbNavLink>-->
<!--                                                    <table>-->
<!--                                                        {{dishCategory.name}}-->
<!--                                                        <ng-container *ngIf="activeDishCategoryId === dishCategory.id">-->
<!--                                                            <span (click)="openChangeDishCategoryForm(dishCategory)" class="action-item mr-0 pr-0" placement="top" ngbTooltip="Bearbeiten"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></span>-->
<!--                                                            <span (click)="openRemoveDishCategoryForm(dishCategory)" class="action-item red pl-1 mr-0 pr-0" placement="top" ngbTooltip="Löschen"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></span>-->
<!--                                                            <ng-container *ngIf="!isFirstDishCategory(dishCategory)">-->
<!--                                                                <span (click)="decOrderOfDishCategory(dishCategory)" class="action-item pl-1 mr-0 pr-0" placement="top" ngbTooltip="Nach links"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></span>-->
<!--                                                            </ng-container>-->
<!--                                                            <ng-container *ngIf="!isLastDishCategory(dishCategory)">-->
<!--                                                                <span (click)="incOrderOfDishCategory(dishCategory)" class="action-item pl-1 mr-0 pr-0" placement="top" ngbTooltip="Nach rechts"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></span>-->
<!--                                                            </ng-container>-->
<!--                                                        </ng-container>-->
<!--                                                    </table>-->

<!--                                                </a>-->
<!--                                                <ng-template ngbNavContent>-->
<!--                                                    <div id="table">-->
<!--                                                        <table class="table table-sm">-->
<!--                                                            <thead>-->
<!--                                                                <tr>-->
<!--                                                                    <th scope="col" style="min-width: 240px;">Name</th>-->
<!--                                                                    <th scope="col">Preis</th>-->
<!--                                                                    <th scope="col">-->
<!--                                                                        <div class="float-right">-->
<!--                                                                            <button class="action-item" (click)="openEditDishForm(dishCategory, undefined)" placement="left" ngbTooltip="Gericht anlegen"><i class="fas fa-plus"></i></button>-->
<!--                                                                        </div>-->
<!--                                                                    </th>-->
<!--                                                                </tr>-->
<!--                                                            </thead>-->
<!--                                                            <tbody>-->
<!--                                                                <tr *ngFor="let dish of dishCategory.dishes">-->
<!--                                                                    <th scope="row">-->
<!--                                                                        <p class="email">{{dish.name}} <br /><span style="font-size: 80%">{{dish.description}}</span></p>-->
<!--                                                                    </th>-->
<!--                                                                    <th><p class="email">{{getPricesOfDish(dish)}}</p></th>-->
<!--                                                                    <td class="actions">-->
<!--                                                                        <a (click)="openEditDishForm(dishCategory, dish)" class="action-item" placement="top" ngbTooltip="Bearbeiten"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></a>-->
<!--                                                                        <a (click)="openRemoveDishForm(dishCategory, dish)" class="action-item red" placement="top" ngbTooltip="Löschen"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></a>-->
<!--                                                                        <button (click)="decOrderOfDish(dishCategory, dish)" [disabled]="isFirstDish(dishCategory, dish)" class="action-item" placement="top" ngbTooltip="Nach oben"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg></button>-->
<!--                                                                        <button (click)="incOrderOfDish(dishCategory, dish)" [disabled]="isLastDish(dishCategory, dish)" class="action-item" placement="top" ngbTooltip="Nach unten"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button>-->
<!--                                                                    </td>-->
<!--                                                                </tr>-->
<!--                                                            </tbody>-->
<!--                                                        </table>-->
<!--                                                    </div>-->
<!--                                                </ng-template>-->
<!--                                            </li>-->
<!--                                            <li>-->
<!--                                                <button class="action-item" (click)="openAddDishCategoryForm()" placement="left" ngbTooltip="Kategorie erstellen"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button>-->
<!--                                            </li>-->
<!--                                        </ul>-->
<!--                                        <div [ngbNavOutlet]="nav"></div>-->
<!--                                    </div>-->
<!--                                </form>-->
<!--                                &lt;!&ndash; ENDE: Speisekarte &ndash;&gt;-->

        </div>
    </div>
</block-ui>
