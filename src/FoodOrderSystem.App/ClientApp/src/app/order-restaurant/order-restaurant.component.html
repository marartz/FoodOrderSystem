<block-ui>
    <div class="row" *ngIf="generalError !== undefined">
        <div class="col-12 setting-form">
            <div class="form-notification">{{generalError}}</div>
        </div>
    </div>

    <main class="order-restaurant" *ngIf="generalError === undefined && initialized">

        <section class="order-section">

            <div class="hero-banner-wrapper">
                <div class="order-banner" style='background-image: url("../../assets/img/home/order-restaurant/default.jpg");'></div>

                <div class="restaurant-info-container" (click)="openImprintModal()">
                    <div class="restaurant-info-main">
                        <div class="restaurant-name">
                            <h1>{{restaurant.name}}<br /><span class="restaurant-adress">{{restaurant.address.street}}, {{restaurant.address.zipCode}} {{restaurant.address.city}}</span></h1>
                        </div>
                        <div class="restaurant-info-button" (click)="openImprintModal()">
                            <span (click)="openImprintModal()">
                                <svg focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation">
                                    <path
                                        d="M12,2 C14.6521649,2 17.195704,3.0535684 19.0710678,4.92893219 C20.9464316,6.80429597 22,9.3478351 22,12 C22,17.5228475 17.5228475,22 12,22 C6.4771525,22 2,17.5228475 2,12 C2,6.4771525 6.4771525,2 12,2 Z M12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 C16.9705627,21 21,16.9705627 21,12 C21,9.61305159 20.0517884,7.32386638 18.363961,5.63603897 C16.6761336,3.94821156 14.3869484,3 12,3 Z M10.784,18 L10.784,10 L13.216,10 L13.216,18 L10.784,18 Z M13.44,7.472 C13.44,8.272 12.8,8.88 12,8.88 C11.2,8.88 10.56,8.272 10.56,7.472 C10.56,6.672 11.2,6.064 12,6.064 C12.8,6.064 13.44,6.672 13.44,7.472 Z">
                                    </path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>

            </div>

            <nav class="dish-menu-category-list" style="top: 1px;">
                <div class="dish-control-holder">
                    <div class="nav-holder">
                        <ul style="transform: translateX(0px);">
                            <li *ngFor="let dishCategory of dishCategories">
                                <a class="" href="/restaurants/{{restaurant.id}}#{{dishCategory.id}}"
                                    title="{{dishCategory.name}}">{{dishCategory.name}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <section class="dish-menu-list">

                <div class="dish-category-section" *ngFor="let dishCategory of dishCategories">
                    <div class="dish-inner-wrapper" id="{{dishCategory.id}}">
                        <h2 class="dish-category-title">{{dishCategory.name}}</h2>
                        <ul class="dish-list">

                            <li class="dish-card" *ngFor="let dish of dishCategory.dishes">
                                <span class="dish-react-root">
                                    <div class="dish-info-container">
                                        <div class="dish-info">
                                            <h3 class="dish-name"><span>{{dish.name}}</span></h3>
                                            <p class="dish-description">{{dish.description}}</p>
                                        </div>
                                    </div>
                                    <section class="action-bar">
                                        <div class="action-bar-content">
                                            <span class="dish-price">&euro;{{getFirstDishVariant(dish)}}</span>
                                        </div>
                                        <button class="add" (click)="onAddDishToCart(dish)"></button>
                                    </section>
                                </span>
                            </li>

                        </ul>
                    </div>
                </div>

            </section>

        </section>

        <aside class="cart-column">
            <div>
                <div class="desktop-cart mobile-hidden">

                    <div class="desktop-cart-container" style="position: fixed; max-height: 598px; width: 336px;">

                        <p class="delivery-time">
                            <i class="icon-delivery fas fa-history"></i>
                            <!-- TODO: Durchsch. ø Lieferzeit -->
                            <span class="delivery-time">XY Min.</span>
                        </p>

                        <div class="cart-header">
                            <h3 class="cart-title">Deine Bestellung bei <br /><span>{{restaurant.name}}</span></h3>
                            <p class="cart-noitems" style="display: block;" *ngIf="isCartEmpty()">Du hast noch nichts in deinen Warenkorb gelegt! Füge ganz einfach deine Lieblingsgerichte hinzu.</p>
                        </div>

                        <div class="desktop-cart-order" *ngIf="!isCartEmpty()">
                            <div class="checkout-summary-wrapper" style="max-height: 307px;">
                                <div class="checkout-summary">
                                    <div class="cart-body">

                                        <div class="cart-item" *ngFor="let orderedDish of getCart().orderedDishes">
                                            <div class="item-row">

                                                <div class="item-minus" (click)="onDecrementDishVariantCount(orderedDish)">
                                                    <svg width="24" height="24" viewBox="0 0 24 24"><defs><path id="cart-minus-a" d="M6 12h11v1H6z"></path></defs><g fill="none" fill-rule="evenodd"><mask id="cart-minus-b" fill="#fff"><use xlink:href="#cart-minus-a"></use></mask><use fill="#858585" xlink:href="#cart-minus-a"></use><g fill="#52AE31" mask="url(#cart-minus-b)"><path d="M0 0h24v24H0z"></path></g></g></svg>
                                                </div>

                                                <div class="item-quantity">{{orderedDish.count}}</div>

                                                <div class="item-plus" (click)="onIncrementDishVariantCount(orderedDish)">
                                                    <svg width="24" height="24" viewBox="0 0 24 24"><defs><path id="cart-plus-a" d="M12 12V7h1v5h5v1h-5v5h-1v-5H7v-1h5z"></path></defs><g fill="none" fill-rule="evenodd"><mask id="cart-plus-b" fill="#fff"><use xlink:href="#cart-plus-a"></use></mask><use fill="#858585" xlink:href="#cart-plus-a"></use><g fill="#52AE31" mask="url(#cart-plus-b)"><path d="M0 0h24v24H0z"></path></g></g></svg>
                                                </div>

                                                <div class="item-name">{{orderedDish.dish.name}}</div>

                                                <div class="item-price">&euro; {{orderedDish.getPriceText()}}</div>

                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="desktop-cart-footer">
                            <div class="desktop-cart-order-subtotal-container">
                                <div class="order-subtotal">
                                    Zwischensumme
                                    <span class="order-subtotal-price">&euro; {{getCart().getValueOfOrderText()}}</span>
                                </div>
                                <div class="order-min-order">
                                    Mindestbestellwert
                                    <span class="min-order-value">&euro; {{getCart().getMinimumOrderValueText()}}</span>
                                </div>
                                <div class="order-min-order-diff" *ngIf="!isCartEmpty()">
                                    Differenz zu Min.
                                    <span class="min-order-value">&euro; {{getCart().getMissingValueToMinimumText()}}</span>
                                </div>
                                <div class="order-delivery">
                                    <div class="delivery-fee">Lieferkosten</div>
                                    <span class="delivery-price" *ngIf="getCart().isDeliveryForFree()">Kostenlos</span>
                                    <span class="delivery-price" *ngIf="!getCart().isDeliveryForFree()">&euro; {{getCart().getDeliveryCostsText()}}</span>
                                </div>
                                <div class="order-total">
                                    Gesamt <em class="total-note">(inkl. USt)</em>
                                    <div class="total-price">&euro; {{getCart().getTotalPriceText()}}</div>
                                </div>
                            </div>
                            <div class="order-checkout">
                                <button class="checkout-button">Fortfahren</button>
                                <!-- class="active" wenn Mindestbestellwert erreicht -->

                                <!--<button class="checkout-button">Geschlossen</button>-->
                                <!-- Wenn Bestellung außerhalb Lieferzeit -->
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </aside>

    </main>
</block-ui>