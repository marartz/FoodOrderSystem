<block-ui>
    <div class="row" *ngIf="generalError !== undefined">
        <div class="col-12 setting-form">
            <div class="form-notification">{{generalError}}</div>
        </div>
    </div>

    <section id="main" role="main" *ngIf="generalError === undefined && initialized">
        <div class="focus-outlet" tabindex="-1" role="group">

            <div id="restaurants-menu">

                <div id="menu-hero" class="hero">
                    <div class="hero-image">
                        <div class="background-image" style='background-image:url("https://images.pexels.com/photos/718742/pexels-photo-718742.jpeg?cs=srgb&dl=fries-with-leaves-dish-718742.jpg&fm=jpg")'></div>
                    </div>
                    <div class="hero-content clearfix">
                        <div class="centered">

                            <div class="restaurant-hero-card">
                                <div class="hero-card-inner">
                                    <h1>{{restaurant.name}}</h1>
                                    <p>
                                        {{restaurant.address.street}}, {{restaurant.address.zipCode}} {{restaurant.address.city}}
                                        <br />{{restaurant.phone}}
                                        <br />Öffnungszeiten
                                    </p>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="categories">
                    <div class="bar">
                        <div class="bar-inner">
                            <ul class="category-links" role="navigation">
                                <li class="category-link" *ngFor="let dishCategory of dishCategories">
                                    <a class="text-link" href="/restaurants/{{restaurant.id}}#{{dishCategory.id}}">{{dishCategory.name}}</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="menu">
                    <div class="clearfix waypointable" *ngFor="let dishCategory of dishCategories">

                            <div class="dish-categories" id="{{dishCategory.id}}" tabindex="-1">
                                <h1 class="menu-group-title">{{dishCategory.name}}</h1>
                            </div>

                            <div class="dish-grid">

                                <div class="product-card-wrap" (click)="onAddDishToCart(dish)" *ngFor="let dish of dishCategory.dishes">
                                    <div class="product-card link-card">

                                        <div class="card-inner" role="link" tabindex="0">
                                            <div class="card-content">
                                                <h2 class="product-name">{{dish.name}}</h2>
                                                <p class="product-description">{{dish.description}}</p>

                                                <div class="card-meta">
                                                    <div class="price">
                                                        <span class="product-cost">&euro; {{getFirstDishVariant(dish)}}</span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>



                    </div>
                </div>

            </div>

        </div>

        <div id="bag" role="complementary" [class.visible]="isCartVisible()">
            <div class="bag-panel">

                <div id="bag-header">
                    <div class="info-group">
                        <div class="info-group-left">
                            <button id="close-bag" class="info-group-icon">
                                <svg viewBox="0 0 24 24" width="100%" height="100%">
                                    <path d="M15.5 7.1L12 10.6 8.5 7.1 7.1 8.5l3.5 3.5-3.5 3.5 1.4 1.4 3.5-3.5 3.5 3.5 1.4-1.4-3.5-3.5 3.5-3.5z"></path>
                                    <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm0 22C6.5 22 2 17.5 2 12S6.5 2 12 2s10 4.5 10 10-4.5 10-10 10z"></path>
                                </svg>
                            </button>
                        </div>
                        <h2 class="title">
                            <span class="cart">Warenkorb</span>
                            <span class="restaurant-name">{{restaurant.name}}</span>
                        </h2>
                    </div>
                </div>

                <div id="bag-main">
                    <div class="info-section">
                        <h2 class="info-label">Deine Bestellung</h2>
                        <div class="line-item-reduced" *ngFor="let orderedDish of getCart().orderedDishes">
                            <div class="card-content">
                                <div class="info-group-left">
                                    <div class="info-group-row">
                                        <span class="info-group-label product-quantity">{{orderedDish.count}}</span>
                                    </div>
                                </div>
                                <div class="info-group-center">
                                    <div class="info-group-row"><h2 class="info-group-label product-name">{{orderedDish.dish.name}} <ng-container *ngIf="orderedDish.dish.variants.length > 1">({{orderedDish.variant.name}})</ng-container></h2></div>
                                    <div class="info-group-row"><p class="product-description">{{orderedDish.remarks}}</p></div>
                                    <div class="info-group-row card-actions-row">
                                        <a class="text-link" role="button" tabindex="0">Bearbeiten</a>
                                        <a class="text-link" role="button" tabindex="0" (click)="onDecrementDishVariantCount(orderedDish)">Entfernen</a>
                                    </div>
                                </div>
                                <div class="info-group-right">
                                    <div class="product-cost info-group-row">&euro; {{orderedDish.getPriceText()}}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="info-section bag-totals">
                        <div class="totals">
                            <div class="row-collapse">
                                <div class="label">
                                    <span class="subtotal-label">Zwischensumme</span>
                                </div>
                                <div class="price">&euro; {{getCart().getTotalPriceText()}}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="bag-footer">
                    <div class="info-section">
                        <div class="bag-btns">
                            <div class="cta-wrap"><button class="button-cta menu">Zum Menü</button></div>
                            <div class="cta-wrap" *ngIf="!isCartEmpty()"><button class="button-cta checkout">Checkout</button></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        



                  <div class="cols">
                    <div class="col store-cart-container">
                    <section class="store-cart">
                        <section class="cart-products">


                            <div class="products-list">


                                <div class="cart-empty" *ngIf="isCartEmpty()">
                                    <img src="../../assets/img/icons/order-restaurant/" alt="" />
                                    <div class="cart-empty-text">LEER</div>
                                </div>

                                

                            </div>


                            <div class="cart-total" *ngIf="!isCartEmpty()">
                                <span class="total-label">Gesamt</span>
                                <div class="total-seperator"></div>
                                <div class="total-price">{{getCart().getTotalPriceText()}} &euro;</div>
                            </div>
                            <a class="cart-button" *ngIf="!isCartEmpty()">Zum Checkout</a>

                        </section>
                    </section>
                </div>

            </div>

    </section>
</block-ui>
